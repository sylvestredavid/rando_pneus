{"version":3,"sources":["webpack:///src/app/pages/login/login.page.html","webpack:///src/app/pages/login/login-routing.module.ts","webpack:///src/app/pages/login/login.module.ts","webpack:///src/app/pages/login/login.page.scss","webpack:///src/app/pages/login/login.page.ts"],"names":["routes","path","component","LoginPageRoutingModule","imports","forChild","exports","LoginPageModule","declarations","LoginPage","oneSignal","menu","router","formBuilder","userService","ficheFirebaseService","loginForm","group","login","required","password","startInit","inFocusDisplaying","OSInFocusDisplayOption","Notification","sendTags","comiteo","getPermissionSubscriptionState","handleNotificationOpened","subscribe","navigate","endInit","e","console","warn","user","getIds","then","onfulfilled","addToken","id","userId","initOneSignalNotificationPush","value","localStorage","setItem","storUser","appendDeviceToFirebase","getFiches","err","alert","error","selector","template"],"mappings":"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","file":"pages-login-login-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n    </ion-buttons>\\n    <img class=\\\"papatte\\\" src=\\\"./assets/img/patte.png\\\" align=\\\"middle\\\" alt=\\\"\\\">\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content id=\\\"content\\\">\\n  <div id=\\\"flex\\\">\\n\\n    <ion-icon class=\\\"person\\\" name=\\\"person\\\"></ion-icon>\\n    <div id=\\\"login\\\">\\n\\n      <form [formGroup]=\\\"loginForm\\\" (ngSubmit)=\\\"submit()\\\">\\n        <ion-input type=\\\"text\\\" placeholder=\\\"Identifiant\\\" formControlName=\\\"login\\\"></ion-input>\\n        <ion-input type=\\\"password\\\" placeholder=\\\"Mot de passe\\\" formControlName=\\\"password\\\"></ion-input>\\n        <ion-button color=\\\"primary\\\" expand=\\\"full\\\" shape=\\\"\\\" type=\\\"submit\\\" [disabled]=\\\"!loginForm.valid\\\">Valider</ion-button>\\n      </form>\\n    </div>\\n  </div>\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { LoginPageRoutingModule } from \"./login-routing.module\";\n\nimport { LoginPage } from \"./login.page\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LoginPageRoutingModule,\n    ReactiveFormsModule,\n  ],\n  declarations: [LoginPage],\n})\nexport class LoginPageModule {}\n","export default \"#flex {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n\\n#login {\\n  max-width: 50%;\\n}\\n\\n#login ion-input {\\n  width: 300px;\\n  height: 48px;\\n  border: 1px solid #B9AA97;\\n  margin-bottom: 24px;\\n  padding-left: 5px !important;\\n}\\n\\n#login ion-input input {\\n  margin: 15px;\\n}\\n\\n.person {\\n  color: #747474;\\n  font-size: 8em;\\n}\\n\\nion-button:disabled {\\n  background: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZHN5bHZlc3RyZS9EZXNrdG9wL3JhbmRvX3BuZXVzL3NyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0VBQ0Esc0JBQUE7QUNDRjs7QURFQTtFQUNFLGNBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7RUFDQSxtQkFBQTtFQUNBLDRCQUFBO0FDQ0Y7O0FERUE7RUFDRSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxjQUFBO0VBQ0EsY0FBQTtBQ0NGOztBREVBO0VBQ0UsZUFBQTtBQ0NGIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2ZsZXgge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuI2xvZ2luIHtcbiAgbWF4LXdpZHRoOiA1MCU7XG59XG5cbiNsb2dpbiBpb24taW5wdXQge1xuICB3aWR0aDogMzAwcHg7XG4gIGhlaWdodDogNDhweDtcbiAgYm9yZGVyOiAxcHggc29saWQgI0I5QUE5NztcbiAgbWFyZ2luLWJvdHRvbTogMjRweDtcbiAgcGFkZGluZy1sZWZ0OiA1cHggIWltcG9ydGFudDtcbn1cblxuI2xvZ2luIGlvbi1pbnB1dCBpbnB1dCB7XG4gIG1hcmdpbjogMTVweDtcbn1cblxuLnBlcnNvbiB7XG4gIGNvbG9yOiAjNzQ3NDc0O1xuICBmb250LXNpemU6IDhlbTtcbn1cblxuaW9uLWJ1dHRvbjpkaXNhYmxlZCB7XG4gIGJhY2tncm91bmQ6IHJlZFxufVxuIiwiI2ZsZXgge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbn1cblxuI2xvZ2luIHtcbiAgbWF4LXdpZHRoOiA1MCU7XG59XG5cbiNsb2dpbiBpb24taW5wdXQge1xuICB3aWR0aDogMzAwcHg7XG4gIGhlaWdodDogNDhweDtcbiAgYm9yZGVyOiAxcHggc29saWQgI0I5QUE5NztcbiAgbWFyZ2luLWJvdHRvbTogMjRweDtcbiAgcGFkZGluZy1sZWZ0OiA1cHggIWltcG9ydGFudDtcbn1cblxuI2xvZ2luIGlvbi1pbnB1dCBpbnB1dCB7XG4gIG1hcmdpbjogMTVweDtcbn1cblxuLnBlcnNvbiB7XG4gIGNvbG9yOiAjNzQ3NDc0O1xuICBmb250LXNpemU6IDhlbTtcbn1cblxuaW9uLWJ1dHRvbjpkaXNhYmxlZCB7XG4gIGJhY2tncm91bmQ6IHJlZDtcbn0iXX0= */\";","import { Component, OnInit } from \"@angular/core\";\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\nimport { MenuController, NavController } from \"@ionic/angular\";\nimport { UserService } from \"../../services/user.service\";\nimport { Router } from \"@angular/router\";\nimport { FicheFirebaseService } from \"../../services/fiche-firebase.service\";\nimport { OneSignal } from \"@ionic-native/onesignal/ngx\";\n\n@Component({\n  selector: \"app-login\",\n  templateUrl: \"./login.page.html\",\n  styleUrls: [\"./login.page.scss\"],\n})\nexport class LoginPage {\n  loginForm: FormGroup;\n  user: any;\n\n  constructor(\n    private oneSignal: OneSignal,\n    private menu: MenuController,\n    public router: Router,\n    private formBuilder: FormBuilder,\n    private userService: UserService,\n    private ficheFirebaseService: FicheFirebaseService\n  ) {\n    this.loginForm = this.formBuilder.group({\n      login: [\"\", Validators.required],\n      password: [\"\", Validators.required],\n    });\n  }\n\n  /*\n   * @function oneSignalNotificationPush()\n   * @summary Init oneSignal notification push\n   */\n  initOneSignalNotificationPush() {\n    try {\n      this.oneSignal.startInit(\n        \"5ed634ba-df2d-4ea7-8fd2-bbfcd32af902\",\n        \"861834275864\"\n      );\n\n      this.oneSignal.inFocusDisplaying(\n        this.oneSignal.OSInFocusDisplayOption.Notification\n      );\n\n      this.oneSignal.sendTags({\n        comiteo: \"app-generic-test\",\n      });\n\n      this.oneSignal.getPermissionSubscriptionState();\n\n      this.oneSignal.handleNotificationOpened().subscribe(\n          () => {\n            this.router.navigate([\"fiche\"]);\n          }\n      )\n\n      this.oneSignal.endInit();\n    } catch (e) {\n      console.warn(\"cordova_not_available\");\n    }\n  }\n\n  appendDeviceToFirebase(user) {\n    this.oneSignal\n      .getIds()\n      .then((onfulfilled) => {\n        this.userService.addToken(user.id, onfulfilled.userId).subscribe();\n      })\n      .catch(() => {});\n  }\n\n  submit() {\n    this.initOneSignalNotificationPush();\n    this.userService.login(this.loginForm.value).subscribe(\n      (user) => {\n        localStorage.setItem(\"userId\", \"\" + user.id);\n        this.userService.storUser(user);\n        this.appendDeviceToFirebase(user);\n        this.ficheFirebaseService.getFiches(user.id);\n\n        this.router.navigate([\"accueil\"]);\n      },\n      (err) => alert(err.error)\n    );\n    // this.router.navigate(['accueil']);\n    // this.ficheFirebaseService.getFiches();\n  }\n}\n"]}