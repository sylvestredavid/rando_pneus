{"version":3,"sources":["./src/app/pages/login/login.page.html","./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.scss","./src/app/pages/login/login.page.ts"],"names":[],"mappings":"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","file":"pages-login-login-module-es2015.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n    </ion-buttons>\\r\\n    <img class=\\\"papatte\\\" src=\\\"./assets/img/patte.png\\\" align=\\\"middle\\\" alt=\\\"\\\">\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content id=\\\"content\\\">\\r\\n  <div id=\\\"flex\\\">\\r\\n\\r\\n    <ion-icon class=\\\"person\\\" name=\\\"person\\\"></ion-icon>\\r\\n    <div id=\\\"login\\\">\\r\\n\\r\\n      <form [formGroup]=\\\"loginForm\\\" (ngSubmit)=\\\"submit()\\\">\\r\\n        <ion-input type=\\\"text\\\" placeholder=\\\"Identifiant\\\" formControlName=\\\"login\\\"></ion-input>\\r\\n        <ion-input type=\\\"password\\\" placeholder=\\\"Mot de passe\\\" formControlName=\\\"password\\\"></ion-input>\\r\\n        <ion-button color=\\\"primary\\\" expand=\\\"full\\\" shape=\\\"\\\" type=\\\"submit\\\" [disabled]=\\\"!loginForm.valid\\\">Valider</ion-button>\\r\\n      </form>\\r\\n    </div>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\r\n\r\nimport { IonicModule } from \"@ionic/angular\";\r\n\r\nimport { LoginPageRoutingModule } from \"./login-routing.module\";\r\n\r\nimport { LoginPage } from \"./login.page\";\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule,\r\n    ReactiveFormsModule,\r\n  ],\r\n  declarations: [LoginPage],\r\n})\r\nexport class LoginPageModule {}\r\n","export default \"#flex {\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  flex-direction: column;\\n}\\n\\n#login {\\n  max-width: 50%;\\n}\\n\\n#login ion-input {\\n  width: 300px;\\n  height: 48px;\\n  border: 1px solid #B9AA97;\\n  margin-bottom: 24px;\\n  padding-left: 5px !important;\\n}\\n\\n#login ion-input input {\\n  margin: 15px;\\n}\\n\\n.person {\\n  color: #747474;\\n  font-size: 8em;\\n}\\n\\nion-button:disabled {\\n  background: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvbG9naW4vRDpcXFByb2plY3RzXFxyYW5kb19wbmV1cy9zcmNcXGFwcFxccGFnZXNcXGxvZ2luXFxsb2dpbi5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL2xvZ2luL2xvZ2luLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsdUJBQUE7RUFDQSxzQkFBQTtBQ0NGOztBREVBO0VBQ0UsY0FBQTtBQ0NGOztBREVBO0VBQ0UsWUFBQTtFQUNBLFlBQUE7RUFDQSx5QkFBQTtFQUNBLG1CQUFBO0VBQ0EsNEJBQUE7QUNDRjs7QURFQTtFQUNFLFlBQUE7QUNDRjs7QURFQTtFQUNFLGNBQUE7RUFDQSxjQUFBO0FDQ0Y7O0FERUE7RUFDRSxlQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9sb2dpbi9sb2dpbi5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjZmxleCB7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgaGVpZ2h0OiAxMDAlO1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG59XHJcblxyXG4jbG9naW4ge1xyXG4gIG1heC13aWR0aDogNTAlO1xyXG59XHJcblxyXG4jbG9naW4gaW9uLWlucHV0IHtcclxuICB3aWR0aDogMzAwcHg7XHJcbiAgaGVpZ2h0OiA0OHB4O1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNCOUFBOTc7XHJcbiAgbWFyZ2luLWJvdHRvbTogMjRweDtcclxuICBwYWRkaW5nLWxlZnQ6IDVweCAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4jbG9naW4gaW9uLWlucHV0IGlucHV0IHtcclxuICBtYXJnaW46IDE1cHg7XHJcbn1cclxuXHJcbi5wZXJzb24ge1xyXG4gIGNvbG9yOiAjNzQ3NDc0O1xyXG4gIGZvbnQtc2l6ZTogOGVtO1xyXG59XHJcblxyXG5pb24tYnV0dG9uOmRpc2FibGVkIHtcclxuICBiYWNrZ3JvdW5kOiByZWRcclxufVxyXG4iLCIjZmxleCB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxuXG4jbG9naW4ge1xuICBtYXgtd2lkdGg6IDUwJTtcbn1cblxuI2xvZ2luIGlvbi1pbnB1dCB7XG4gIHdpZHRoOiAzMDBweDtcbiAgaGVpZ2h0OiA0OHB4O1xuICBib3JkZXI6IDFweCBzb2xpZCAjQjlBQTk3O1xuICBtYXJnaW4tYm90dG9tOiAyNHB4O1xuICBwYWRkaW5nLWxlZnQ6IDVweCAhaW1wb3J0YW50O1xufVxuXG4jbG9naW4gaW9uLWlucHV0IGlucHV0IHtcbiAgbWFyZ2luOiAxNXB4O1xufVxuXG4ucGVyc29uIHtcbiAgY29sb3I6ICM3NDc0NzQ7XG4gIGZvbnQtc2l6ZTogOGVtO1xufVxuXG5pb24tYnV0dG9uOmRpc2FibGVkIHtcbiAgYmFja2dyb3VuZDogcmVkO1xufSJdfQ== */\";","import { Component, OnInit } from \"@angular/core\";\r\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\r\nimport { MenuController, NavController } from \"@ionic/angular\";\r\nimport { UserService } from \"../../services/user.service\";\r\nimport { Router } from \"@angular/router\";\r\nimport { FicheFirebaseService } from \"../../services/fiche-firebase.service\";\r\nimport { OneSignal } from \"@ionic-native/onesignal/ngx\";\r\n\r\n@Component({\r\n  selector: \"app-login\",\r\n  templateUrl: \"./login.page.html\",\r\n  styleUrls: [\"./login.page.scss\"],\r\n})\r\nexport class LoginPage {\r\n  loginForm: FormGroup;\r\n  user: any;\r\n\r\n  constructor(\r\n    private oneSignal: OneSignal,\r\n    private menu: MenuController,\r\n    public router: Router,\r\n    private formBuilder: FormBuilder,\r\n    private userService: UserService,\r\n    private ficheFirebaseService: FicheFirebaseService\r\n  ) {\r\n    this.loginForm = this.formBuilder.group({\r\n      login: [\"\", Validators.required],\r\n      password: [\"\", Validators.required],\r\n    });\r\n  }\r\n\r\n  /*\r\n   * @function oneSignalNotificationPush()\r\n   * @summary Init oneSignal notification push\r\n   */\r\n  initOneSignalNotificationPush() {\r\n    try {\r\n      this.oneSignal.startInit(\r\n        \"5ed634ba-df2d-4ea7-8fd2-bbfcd32af902\",\r\n        \"861834275864\"\r\n      );\r\n\r\n      this.oneSignal.inFocusDisplaying(\r\n        this.oneSignal.OSInFocusDisplayOption.Notification\r\n      );\r\n\r\n      this.oneSignal.sendTags({\r\n        comiteo: \"app-generic-test\",\r\n      });\r\n\r\n      this.oneSignal\r\n        .getPermissionSubscriptionState()\r\n        .then(() => {\r\n          alert(\"permission ok\");\r\n        })\r\n        .catch(() => \"permission ko\");\r\n\r\n      this.oneSignal.endInit();\r\n    } catch (e) {\r\n      console.warn(\"cordova_not_available\");\r\n    }\r\n  }\r\n\r\n  appendDeviceToFirebase(user) {\r\n    this.oneSignal\r\n      .getIds()\r\n      .then((onfulfilled) => {\r\n        alert(onfulfilled.userId);\r\n        this.userService.addToken(user.id, onfulfilled.userId).subscribe();\r\n      })\r\n      .catch(() => {});\r\n  }\r\n\r\n  submit() {\r\n    this.initOneSignalNotificationPush();\r\n    this.userService.login(this.loginForm.value).subscribe(\r\n      (user) => {\r\n        localStorage.setItem(\"userId\", \"\" + user.id);\r\n        this.userService.storUser(user);\r\n        this.appendDeviceToFirebase(user);\r\n        this.ficheFirebaseService.getFiches(user.id);\r\n\r\n        this.router.navigate([\"accueil\"]);\r\n      },\r\n      (err) => alert(err.error)\r\n    );\r\n    // this.router.navigate(['accueil']);\r\n    // this.ficheFirebaseService.getFiches();\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}